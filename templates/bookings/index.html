{% extends "bookings/base.html" %}
{% load static %}

{% block content %}

<div class="container">

    <!-- üîç Search & Filter Form -->
    <form method="get" class="filter-form">
        <input
            type="text"
            name="search"
            placeholder="Search movies..."
            value="{{ request.GET.search }}"
        >

        <select name="genre">
            <option value="">All Genres</option>
            {% for movie in movies %}
                <option value="{{ movie.genre }}"
                    {% if request.GET.genre == movie.genre %}selected{% endif %}>
                    {{ movie.genre }}
                </option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    <!-- üé¨ Movie Cards -->
    <div class="movie-grid">
        {% for movie in movies %}
        <div class="movie-card">

            {% if movie.poster %}
                <img src="{{ movie.poster.url }}" alt="{{ movie.title }}">
            {% else %}
                <img src="{% static 'images/no-poster.png' %}" alt="No Poster">
            {% endif %}

            <h3>{{ movie.title }}</h3>
            <p class="genre">{{ movie.genre }}</p>
            <p class="duration">‚è± {{ movie.duration }}</p>

            <a href="{% url 'movie_detail' movie.id %}" class="book-btn">
                Book Now
            </a>

        </div>
        {% empty %}
        <p style="text-align:center;">No movies found.</p>
        {% endfor %}
    </div>

</div>

{% endblock %}
