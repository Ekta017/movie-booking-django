{% extends "bookings/base.html" %}
{% load static %}

{% block content %}

<div class="container">

    <!-- Search & Filter -->
    <form method="get" class="filter-form">
        <input type="text" name="search" placeholder="Search movies..."
               value="{{ request.GET.search }}">

        <select name="genre">
            <option value="">All Genres</option>
            {% for movie in movies %}
            <option value="{{ movie.genre }}"
                {% if request.GET.genre == movie.genre %}selected{% endif %}>
                {{ movie.genre }}
            </option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    <!-- Movie Cards -->
    <div class="movie-grid">
        {% for movie in movies %}
        <div class="movie-card">

            {% if movie.poster %}
                <img src="{{ movie.poster.url }}" alt="{{ movie.title }}">
            {% else %}
                <img src="{% static 'images/no-poster.png' %}" alt="No Poster">
            {% endif %}

            <h3>{{ movie.title }}</h3>
            <p>{{ movie.genre }}</p>
            <p>‚è± {{ movie.duration }}</p>

            <a href="{% url 'movie_detail' movie.id %}" class="book-btn">
                Book Now
            </a>

        </div>
        {% empty %}
        <p>No movies available.</p>
        {% endfor %}
    </div>

</div>

{% endblock %}
